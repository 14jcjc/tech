/* Place your custom SCSS in HUGO_SITE_FOLDER/assets/scss/custom.scss */

:root {
  --main-top-padding: 35px;

  @include respond(xl) {
      --main-top-padding: 50px;
  }

  // --body-background: #f5f5fa;
  --body-background: rgb(240, 248, 255);

  --accent-color: #34495e;
  --accent-color-darker: #2c3e50;
  --accent-color-text: #fff;
  --body-text-color: #707070;

  --tag-border-radius: 4px;

  --section-separation: 40px;

  --scrollbar-thumb: hsl(0, 0%, 85%);
  --scrollbar-track: var(--body-background);

  --code-block-filename-col: #fff;
  --code-block-filename-bg: #34495e;

  &[data-scheme="dark"] {
      // --body-background: #303030;
      --body-background: #101030;
      --accent-color: #ecf0f1;
      --accent-color-darker: #bdc3c7;
      --accent-color-text: #000;
      --body-text-color: rgba(255, 255, 255, 0.7);
      --scrollbar-thumb: hsl(0, 0%, 40%);
      --scrollbar-track: var(--body-background);
      --code-block-filename-col: #fff;
      --code-block-filename-bg: #34495e;
  }
}

/*
*   Card style
*/
:root {
  --card-background: #fff;
  --card-background-selected: #eaeaea;

  // --card-text-color-main: #000;
  --card-text-color-main: rgb(30, 30, 40);
  --card-text-color-secondary: #747474;
  --card-text-color-tertiary: #767676;
  --card-separator-color: rgba(218, 218, 218, 0.5);

  &[data-scheme="dark"] {
    --card-background: #424242;
    --card-background-selected: rgba(255, 255, 255, 0.16);
    --card-text-color-main: rgba(255, 255, 255, 0.9);
    --card-text-color-secondary: rgba(255, 255, 255, 0.7);
    --card-text-color-tertiary: rgba(255, 255, 255, 0.5);
    --card-separator-color: rgba(255, 255, 255, 0.12);
  }
}

/**
*   Alerts, Rating, code
*/
:root {
  --code-font-size: 0.9375em;
  /* alerts */
  // --alert-text-color: #333;
  // --alert-bg-color: #f9f9f9;
  --alert-bg-color: var(--blockquote-background-color);
  --alert-color-note: #2196f3; /* Note */
  --alert-color-tip: #60C000; /* Tip */
  --alert-color-important: #9560f0; /* Important */
  --alert-color-warning: #ff5722; /* Warning, Caution */
  /* 演習問題の難易度レーティング (星) */
  --q-difficulty-rating-filled-stars: #FFC107;
  --q-difficulty-rating-empty-stars: #C0C0C0;

  &[data-scheme="dark"] {
    /* alerts */
    // --alert-bg-color: rgb(46, 46, 51);
    // --alert-text-color: rgb(196, 196, 197);
    --alert-color-note: #64b5f6; /* 明るい青 */
    --alert-color-tip: #a2e57b; /* 明るい緑 */
    /* --alert-color-important: #b39ddb; */
    --alert-color-important: #C090F0;
    --alert-color-warning: #ff8a65; /* 明るいオレンジ */
    /* 演習問題の難易度レーティング (星) */
    --q-difficulty-rating-filled-stars: #FFC107;
    --q-difficulty-rating-empty-stars: #C0C0C0;
  }
}

/**
*   Global font family
*/
:root {
  
  --sys-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, "Droid Sans", Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;

  --zh-font-family: "PingFang SC", "Hiragino Sans GB", "Droid Sans Fallback", "Microsoft YaHei";

  --base-font-family: "Noto Sans JP", "Yu Gothic", "Lato", var(--sys-font-family), var(--zh-font-family), sans-serif;
  // 以下の指定だと iPhone で Noto Sans JP が適用されない: 
  // --ja-g-font-family: "Noto Sans JP", '游ゴシック', '游ゴシック Medium', 
  //   'Yu Gothic Medium', '游ゴシック体', 'Yu Gothic', YuGothic, 
  //   'ヒラギノ角ゴ Pro', 'Hiragino Kaku Gothic Pro', 'メイリオ', 'Meiryo';
  // --base-font-family: var(--ja-g-font-family), 'Lato', var(--sys-font-family), 
  //   var(--zh-font-family), sans-serif;

  // --code-font-family: "Roboto Mono", "Monaco", "Consolas", "Courier New", Menlo, var
  // --code-font-family: "Monaco", "Consolas", "Courier New", Menlo, var(--zh-font-family), monospace;
  --code-font-family: Menlo, "Monaco", var(--zh-font-family), monospace, "Consolas";
}

// フォントが読み込まれるまでデフォルトフォントで表示し, 読み込まれたらWebフォントに切り替えるよ
// @font-face {
//   font-family: "Noto Sans JP";
//   src: url("https://fonts.gstatic.com/s/notosansjp/v26/pxiFyp8kv8JHgFVrJJfVlbQ5LgzKDwTQUm5HD4zsh6M.woff2") format("woff2");
//   font-display: swap;
// }

// Share Buttons

// .related-content--wrapper {
//   margin: 0 !important;
//   padding: 0 !important;
// }

// .share-buttons-div {
//   margin-top: -30px;
// }

.share-buttons li,
.share-buttons a {
  display: inline-flex;
}

.share-buttons a:not(:last-of-type) {
  margin-inline-end: 12px;
}

.share-buttons {
  border: none !important; // 枠線をなくす
  padding: 10px;           // 内側の余白
  margin: 5px 0;           // 外側の余白
  // list-style: none;        // リストのデフォルトのスタイルを削除
  display: flex;
  justify-content: center;
  overflow-x: auto;
  gap: 10px;
}

@media screen and (max-width: 340px) {
  .share-buttons {
      justify-content: unset;
  }
}

/**
*   Article content font settings
*/
:root {
  --article-font-family: var(--base-font-family);
  // --article-font-size: 1.6rem;
  --article-font-size: 1.58rem;

  @include respond(md) {
      // --article-font-size: 1.7rem;
      --article-font-size: 1.58rem;
  }

  // --article-line-height: 1.85;
  --article-line-height: 1.95;
}

/*
*   Article content style
*/
:root {
  --blockquote-border-size: 4px;
  --blockquote-background-color: rgb(248 248 248);

  --heading-border-size: 4px;

  --link-background-color: 189, 195, 199;
  --link-background-opacity: 0.5;
  --link-background-opacity-hover: 0.7;

  --pre-background-color: #272822;
  --pre-text-color: #f8f8f2;

  // --code-background-color: rgba(0, 0, 0, 0.12);
  // --code-text-color: #808080;

  --code-background-color: rgba(0, 0, 0, 0.08);
  // --code-text-color: #303030;
  // --code-text-color: rgba(0, 0, 0, 0.95)
  --code-text-color: rgba(20, 20, 30, 0.9)

  --table-border-color: #dadada;
  --tr-even-background-color: #efefee;

  --kbd-border-color: #dadada;

  &[data-scheme="dark"] {
      --code-background-color: #272822;
      // --code-background-color: #333430;
      --code-text-color: rgba(255, 255, 255, 0.9);

      --table-border-color: #717171;
      --tr-even-background-color: #545454;

      --blockquote-background-color: rgb(75 75 75);
  }
}

// -------------------------------------------------------------------------------
/* Menu style */
#main-menu {

  li {
      a {
          height: 100%;
          display: inline-flex;
          align-items: center;
          color: var(--body-text-color);
          gap: var(--menu-icon-separation);
      }

      span {
          flex: 1;
      }

      &.current {
          a {
              color: var(--accent-color) !important;
              // color: #ff0000;
              font-weight: bold !important;
          }
      }

  }
  
}

// -------------------------------------------------------------------------------
/*
*   Shadow style
*   Thanks to https://www.figma.com/community/plugin/744987207861965946/Shadow-picker
*/

// katsu
// light mode, dark mode 共に dark.scss を適用する
// dark mode の Highlight の background-color が悪いので変更する.

[data-scheme="light"] {
  // --pre-text-color: #272822;
  // --pre-background-color: #fafafa;
  // @import "partials/highlight/light.scss";
  --pre-text-color: #f8f8f2;
  --pre-background-color: #22232D;
  @import "partials/highlight/dark.scss";
}

[data-scheme="dark"] {
  --pre-text-color: #f8f8f2;
  // --pre-background-color: #272822;
  --pre-background-color: #22232D;
  @import "partials/highlight/dark.scss";
}

// katsu
// :root {
//   // --chroma-background-color-hl: #ffffcc;
//   // --chroma-background-color-hl: #4B4B38;
//   --chroma-background-color-hl: rgba(255, 255, 100, 0.08);
//   &[data-scheme="dark"] {
//     // --chroma-background-color-hl: #474733;
//     // --chroma-background-color-hl: rgba(255, 255, 200, 0.1);
//     --chroma-background-color-hl: rgba(255, 255, 100, 0.08);
//   }
// }

// サイト名と概要
.site-meta {

  .site-name {
    word-break: break-word !important;
    word-wrap: break-word !important;
    font-size: 18px !important;
    // medium 以上の画面幅でフォントサイズを変更
    @include respond(md) {
      font-size: 18px !important;
    }
  }

  .site-description {
    font-size: 16px !important;
    @include respond(md) {
      font-size: 16px !important;
    }
  }
}

// リストの記事タイトルとサブタイトル
.article-title-wrapper {
	.article-title {
		font-size: 2.2rem;
    @include respond(md) {
      font-size: 2.2rem !important;
    }
	}

	.article-subtitle {
		font-size: 1.6rem;
    @include respond(md) {
      font-size: 1.6rem !important;
    }
	}
}

// リスト <li>の中の<p>
.article-content li p {
  margin: 0 0;
}

// PhotoSwipe

// .gallery {
//   display: flex;
//   flex-wrap: wrap;
//   gap: 10px;
// }

// .gallery-image {
//   flex: 1;
//   cursor: pointer;
//   position: relative;
// }

// .gallery-image img {
//   max-width: 100%;
//   height: auto;
//   display: block;
// }

// .pswp-gallery {
//   display: inline-block;
//   margin: 0px;
//   padding: 0px;
// }

// .pswp-gallery a {
//   display: inline-block;
//   margin: 5px;
//   border: none;
// }

.article-content .code-block-content {
  // margin-left: 0;
  margin-top: 10px;
  margin-bottom: 20px;

  .highlight {
    // padding: var(--card-padding);
    // margin-left: calc(var(--card-padding) * (-0.8));
    // background-color: #FF9900;
    // padding: 10px 15px 10px calc(var(--card-padding) * 0.8);
    padding: 10px 2px 10px var(--card-padding);
  }
}

.article-content blockquote .code-block-content {
  margin-left: 5px;

  .highlight {
    padding-left: calc(var(--card-padding) - 5px);
  }
}

// .chroma pre {
//   display: block;
//   width: 100%;
// }

.highlight pre.chroma code {
  padding: 8px 0;
}

/* inline code */
.article-content code {
  // margin: auto 4px;
  /* padding: 4px 6px; */
  // padding: 2px 6px;
  // font-size: 15px;
  font-size: var(--code-font-size);
  line-height: 1.8;
  border-radius: 2px;
}

.code-block-filename {
  --code-filename-fontsize: calc(0.96em * 0.9);
  margin-bottom: -10px;
  margin-left: calc(var(--card-padding) * (-1.0));

  display: table;
  max-width: 100%;
  // background: var(--accent-color-darker);
  // background: var(--card-background-selected);
  // color: var(--card-text-color-main);
  // background: var(--accent-color);
  background: var(--code-block-filename-bg);
  // color: var(--accent-color-text);
  color: var(--code-block-filename-col);

  font-size: var(--code-filename-fontsize);
  line-height: 1;
  padding-top: calc(var(--code-filename-fontsize) * 0.5);
  // padding-left: calc(var(--code-filename-fontsize) * 0.7);
  // padding-right: calc(var(--code-filename-fontsize) * 0.7);
  padding-left: calc(var(--card-padding) * 1.0);
  padding-right: calc(var(--card-padding) * 1.0);
  padding-bottom: calc(var(--code-filename-fontsize) * 0.7);
  border-radius: calc(var(--code-filename-fontsize) * 0.5)
    calc(var(--code-filename-fontsize) * 0.5) 0 0;
}

// .chroma {
//   font-size: 15px;
// }

/* LineHighlight */
// .chroma .hl {
//   // display: block;
//   display: flex;
//   // width: 100% !important;
//   // min-width: 100% !important;
//   background-color: var(--chroma-background-color-hl) !important;
// }

// /* LineNumbers Link */
// .chroma .ln .lnlinks {
//   margin-right: 0.4em;
//   padding: 0 0.4em 0 0.4em;
//   // color: #7f7f7f;
//   color: #ffff00;
//   text-decoration: underline;
// }

/* LineNumbersTable */
// .chroma .lnt {
//   margin-right: 0.4em;
//   padding: 0 0.4em 0 0.4em;
//   // color: #7f7f7f;
//   color: #A5A5A5 !important;
//   display: block;
// }

// /* LineNumbers (link) */
// .chroma .ln .lnlinks {
//   // color: #7f7f7f;
//   color: #A5A5A5;
//   text-decoration: underline;
// }
// .chroma .lnt .lnlinks {
//   // color: #7f7f7f;
//   color: #A5A5A5;
//   text-decoration: underline;
// }

// -------------------------------------------------------------------------------
// PaperMod

// chroma-mod.css

// .chroma {
//   background-color: unset !important;
// }

// .chroma .hl {
//   display: flex;
// }

// .chroma .lnt {
//   padding: 0 0 0 12px;
// }

// .highlight pre.chroma code {
//   padding: 8px 0;
// }

// .highlight pre.chroma .line .cl,
// .chroma .ln {
//   padding: 0 10px;
// }

.chroma .lntd:last-of-type {
  width: 100%;
}

// post-single.css

// .article-content .highlight:not(table) {
//   margin: 10px auto;
//   background: var(--code-block-bg) !important;
//   border-radius: var(--radius);
//   direction: ltr;
// }

// .article-content li > .highlight {
//   margin-inline-end: 0;
// }

// .article-content ul pre {
//   margin-inline-start: calc(var(--gap) * -2);
// }

// .article-content .highlight pre {
//   margin: 0;
// }

// .article-content .highlighttable {
//   table-layout: fixed;
// }

// .article-content .highlighttable td:first-child {
//   width: 40px;
// }

// .article-content .highlighttable td .linenodiv {
//   padding-inline-end: 0 !important;
// }

// .article-content .highlighttable td .highlight,
// .article-content .highlighttable td .linenodiv pre {
//   margin-bottom: 0;
// }

// .article-content code {
//   margin: auto 4px;
//   padding: 4px 6px;
//   font-size: 0.78em;
//   line-height: 1.5;
//   background: var(--code-bg);
//   border-radius: 2px;
// }

.article-content pre code {
  display: grid;
  // margin: auto 0;
  // padding: 10px;
  // color: rgb(213, 213, 214);
  // background: var(--code-block-bg) !important;
  // border-radius: var(--radius);
  // overflow-x: auto;
  // word-break: break-all;
}

// -------------------------------------------------------------------------------
// a .link
// a {
  // &.link {
  //   display: inline-flex;
  //   align-items: center;
  //   gap: 4px;
  //   text-decoration: none;
  //   position: relative; // 影の調整のため追加
  //   padding-top: 0px; // 影がより上に見えるように余白を確保
  
  //   box-shadow: 0px -2px 0px rgba(var(--link-background-color), var(--link-background-opacity)) inset;
  //   transition: all 0.3s ease;
  
  //   &:hover {
  //     box-shadow: 0px calc(-1.0em * var(--article-line-height)) 0px rgba(var(--link-background-color), var(--link-background-opacity-hover)) inset;
  //   }
  
  //   &::before {
  //     // content: "";
  //     content: "🔗";  // 絵文字を挿入
  //     display: inline-block;
  //     width: 16px;
  //     height: 16px;
  //     background: url("../icons/link.svg") no-repeat center center;
  //     background-size: contain;
  //     flex-shrink: 0;
  //     filter: invert(20%);
  //   }
  
  //   [data-scheme="dark"] &::before {
  //     filter: invert(100%) brightness(2);
  //   }
  
  //   // class="link noicon" の場合はアイコンを非表示
  //   &.noicon::before {
  //     content: none;
  //   }
  
  // &.link {
  //   display: inline-flex;
  //   align-items: center;
  //   gap: 4px;
  //   text-decoration: none;
  
  //   box-shadow: 0px -2px 0px rgba(var(--link-background-color), var(--link-background-opacity)) inset;
  //   transition: all 0.3s ease;
  
  //   &:hover {
  //     box-shadow: 0px calc(-1rem * var(--article-line-height)) 0px rgba(var(--link-background-color), var(--link-background-opacity-hover)) inset;
  //   }
  
  //   &::before {
  //     content: "";
  //     display: inline-block;
  //     width: 16px;
  //     height: 16px;
  //     background: url("../icons/link.svg") no-repeat center center;
  //     background-size: contain;
  //     flex-shrink: 0;
  //     filter: invert(20%);
  //   }
  
  //   [data-scheme="dark"] &::before {
  //     filter: invert(100%) brightness(2);
  //   }
  
  //   // class="link noicon" の場合はアイコンを非表示
  //   &.noicon::before {
  //     content: none; // アイコンを消す
  //   }
  // }
  
  // &.link {
  //     box-shadow: 0px -2px 0px rgba(var(--link-background-color), var(--link-background-opacity)) inset;
  //     transition: all 0.3s ease;
  //     // katsu
  //     position: relative;
  //     padding-left: 20px; // アイコンのスペースを確保

  //     &:hover {
  //         box-shadow: 0px calc(-1rem * var(--article-line-height)) 0px rgba(var(--link-background-color), var(--link-background-opacity-hover)) inset;
  //     }

  //     &::before {
  //       content: "";
  //       display: inline-block;
  //       position: absolute;
  //       left: 0;
  //       top: 50%;
  //       width: 16px;
  //       height: 16px;
  //       // アイコン画像のパスに注意!
  //       background: url("../icons/link.svg") no-repeat center center;
  //       background-size: contain;
  //       transform: translateY(-50%);
  //       box-shadow: none; /* box-shadow の影響を受けないように */
  //       filter: invert(20%); /* デフォルトの色 */
  //     }
  //     [data-scheme="dark"] &::before {
  //       filter: invert(100%) brightness(2); /* ダークモード時に色を反転 */
  //     }

  //     // class="link noicon" の場合はアイコンを非表示
  //     &.noicon::before {
  //       content: none; // アイコンを消す
  //     }
  // }
  
// }

// -------------------------------------------------------------------------------

// 記事の本文 (.article-content)

.article-content {
  font-family: var(--article-font-family);
  font-size: var(--article-font-size);
  padding: 0 var(--card-padding);
  line-height: var(--article-line-height);

  & > p {
      // margin: 1.5em 0;
      margin: 1.0em 0;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    position: relative;
    margin-inline-start: calc((var(--card-padding)) * -1);
    padding-inline-start: calc(var(--card-padding) - var(--heading-border-size));
    border-inline-start: calc(1.5 * var(--heading-border-size)) solid #50C0FF;

    // color: #007bff;

    line-height: 1.5;

    a.header-anchor {
      transition: opacity 0.3s ease;
      opacity: 0;
      position: absolute;
      left: 0;
      width: var(--card-padding);
      text-align: center;
      color: var(--accent-color);

      &:before {
        display: inline-block;
        content: "\f0c1";  // Font Awesome のアイコンコード（例: リンクアイコン）
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        // font-size: 0.75em; // 見出しフォントサイズの75%に縮小
        font-size: 0.5em; // 見出しフォントサイズの75%に縮小
        // content: "";
        // width: 1em;  // アイコンのサイズ
        // height: 1em;
        // background-image: url("../icons/link.svg");
        background-size: contain;
        background-repeat: no-repeat;
      }
    }

    // 画面幅が 640px (sm) 以上のとき
    @include respond(sm) {
      a.header-anchor:before {
        font-size: 0.75em;
      }
    }
  }

  // 見出しのアンカーリンクを "#" にする場合
  // h2 {
  //   display: flex;
  //   align-items: center;
  // }
  // h2 .header-anchor-2 {
  //   display: none; /* 初期状態では非表示 */
  //   margin-left: 8px; /* 見出しテキストとの間隔 */
  // }
  // h1:hover .header-anchor-2,
  // h2:hover .header-anchor-2,
  // h3:hover .header-anchor-2,
  // h4:hover .header-anchor-2,
  // h5:hover .header-anchor-2,
  // h6:hover .header-anchor-2 {
  //   display: inline-flex;
  //   color: var(--accent-color);
  //   font-weight: 500;
  //   user-select: none;
  // }

  h2 .header-anchor-2,
  h3 .header-anchor-2,
  h4 .header-anchor-2,
  h5 .header-anchor-2,
  h6 .header-anchor-2 {
    display: none; /* 初期状態では非表示 */
    // margin-left: 8px; /* 見出しテキストとの間隔 */
  }

  h2:hover .header-anchor-2,
  h3:hover .header-anchor-2,
  h4:hover .header-anchor-2,
  h5:hover .header-anchor-2,
  h6:hover .header-anchor-2 {
    display: inline-flex;
    align-items: center; /* アイコンとテキストを縦方向に中央揃え */
  }

  // ミックスインの定義
  @mixin font-size-responsive($size-sm, $size-lg) {
    font-size: $size-sm;
    // メディアクエリを使って, 画面幅が 640px以上のときのフォントサイズを設定
    @media (min-width: 640px) {
      font-size: $size-lg;
    }
  }

  h2 .header-anchor-2::after,
  h3 .header-anchor-2::after,
  h4 .header-anchor-2::after,
  h5 .header-anchor-2::after,
  h6 .header-anchor-2::after {
    font-family: "Font Awesome 6 Free"; /* Font Awesomeのフォントを指定 */
    content: "\f0c1"; /* アイコンのUnicode */
    font-weight: 900; /* アイコンが正しく表示されるために必要 */
    color: var(--accent-color); /* アイコンの色 */
    display: inline-block; /* アイコンをインライン表示 */
    margin-left: 5px; /* 見出しテキストとの間隔 */
    // font-size: 0.8em; /* アイコンのサイズ */

    // ミックスインを使ってフォントサイズを設定
    // 640px以下のサイズ ($size-sm) とそれ以上のサイズ ($size-lg) を受け取る
    @include font-size-responsive(0.8em, 0.8em);
  }
  
  // 画面幅が 640px (sm) 以上のとき
  // @include respond(sm) {
  //   h2 .header-anchor-2 .header-icon {
  //     font-size: 0.75em;
  //   }
  // }

  // h2 {
  //   line-height: 1.7;
  //   margin-top: 60px;
  //   border-bottom: 1.7px solid #BAD0E0;
  //   padding-bottom: 3px; /* アンダーラインと文字の間隔 */
  // }

  // h2 {
  //   position: relative;
  //   margin-top: 60px;
  //   padding-bottom: 3px; /* アンダーラインと文字の間隔 */
  //   background: linear-gradient(to right, #BAD0E0 0%, #FFFFFF 100%);
  //   background-size: 100% 1.7px;
  //   background-position: left bottom;
  //   background-repeat: no-repeat;
  // }

  h2 {
    // line-height: 1.5;
    width: calc(100% + 1.5 * var(--card-padding));
    // margin-inline-end: calc(-0.5 * var(--card-padding)); /* 右側にも伸ばす */
    margin-top: 60px;
    padding-top: 10pt;
    padding-bottom: 10px;
    padding-right: 8px;
    // padding-right: -12px;
    border-inline-start-width: 0px;

    // color: #209CEE;
    // background-color: #f0f3ff;
    color: #187bcd; /* 少し落ち着いたブルー */
    background-color: #e8f0ff; /* もう少し淡い水色 */
    
    // &::after {
    //   content: "";
    //   position: absolute;
    //   left: 0.0em;
    //   bottom: 0;
    //   width: 97%;
    //   height: 1.4px;
    //   background-color: #50C0FF;
    //   // background: linear-gradient(to right, #90B0D0 0%, #F0F5FF 100%);
    // }
    
    // [data-scheme="dark"] &::after {
    //   background: linear-gradient(to right, #D9E9FF 0%, #405060 100%);
    // }
  }

  h3 {
    width: calc(100% + 1.2 * var(--card-padding));
    font-size: 1.3em;
    margin-top: 40px;
    padding-top: 4pt;
    padding-bottom: 10px; // アンダーラインと文字の間隔
    border-inline-start-width: 8px;
    padding-inline-start: calc(var(--card-padding) - 8px);

    &::after {
      content: "";
      position: absolute;
      left: 0.0em;
      bottom: 0;
      width: 100%;
      height: 1.0px;
      background-color: #50C0FF;
      // background: linear-gradient(to right, #90B0D0 0%, #F0F5FF 100%);
    }
  }
  
  h4, 
  h5, 
  h6 {
    margin-top: 30px;
    // margin-bottom: -0.2em;
    margin-bottom: 0em;
  }

  h4 {
    font-size: 1.1em;
    padding-top: 3pt;
    padding-bottom: 3px;
    border-inline-start-width: 6px;
    padding-inline-start: calc(var(--card-padding) - 6px);
  }

  h5 {
    font-size: 1.0em;
    padding-top: 2pt;
    padding-bottom: 2px;
    border-inline-start-width: 4px;
    padding-inline-start: calc(var(--card-padding) - 4px);
  }

  h6 {
    font-size: 0.9em;
    padding-top: 1pt;
    padding-bottom: 1px;
    border-inline-start-width: 2px;
    padding-inline-start: calc(var(--card-padding) - 2px);
  }

  // h4 + div + .code-block-content {
  //   margin-top: 80px;
  // }
  // h4 + div + .code-block-filename {
  //   margin-top: 80px;
  // }

  // 見出し (h1 ～ h6) の直後にある div に margin-top を適用
  h1 + div,
  h2 + div,
  h3 + div,
  h4 + div,
  h5 + div,
  h6 + div {
    margin-top: 20px;
  }

  // <details> 内の <summary> の直後にある <div> に margin-top を適用
  details > summary + div {
    margin-top: 20px;
  }

  hr {
    // width: 100px;
    width: 50%;
    margin: 40px auto;
    background: var(--card-text-color-tertiary);
    height: 2px;
    border: 0;
    // opacity: 0.55;
    opacity: 0.3;
  }

  // リストのインデント幅を狭くする
  ul, ol {
    // padding-left: 1em;
    // margin-left: 0.3em;
    // padding-left: 22px;
    // margin-left: 0;
    padding-left: 5px;
    margin-left: 1em;
  }

  // ネストされたリストのインデント幅
  ul ul, ol ol, ul ol, ol ul {
    // padding-left: 1em;
    padding-left: 3px;
  }

  // li の余白を最適化（必要に応じて調整）
  // li {
  //   margin-left: 0;
  // }
}

[data-scheme="dark"] .article-content h2 {
  // color: #209CEE;
  // background-color: #333333; // ダークグレーで落ち着いた印象に
  color: #A0CFFF;
  // background-color: #1E2A3F;
  color: #A0CFFF;
  background-color: #24344D;
}

// -------------------------------------------------------------------------------
// .svglite

.svglite text {
  font-family: var(--article-font-family);
  white-space: pre;
}

// -------------------------------------------------------------------------------
// .share-buttons

.share-buttons {
    border: 1px solid var(--accent-color);
}

.share-buttons {
  padding: 10px;
  display: flex;
  justify-content: center;
  overflow-x: auto;
  gap: 10px;
}

.share-buttons li,
.share-buttons a {
  display: inline-flex;
}

.share-buttons a:not(:last-of-type) {
  margin-inline-end: 12px;
}

//-------------------------------------------------------------------------------
// .tocContent

// .tocContent a:hover {
//   box-shadow: 0 1px 0;
//   box-decoration-break: clone;
//   -webkit-box-decoration-break: clone;
// }

// .tocContent, .tocContent * {
//   color: inherit;
// }

.tocContent {
  // transform: none !important;
  // #TableOfContents の font-size を基準に拡大したフォントをベースにする
  font-size: calc(var(--article-font-size) * 0.95 * (1.0 / 0.9));
  margin: 24px 10px 40px 10px;
  // color指定をしないと, ダークモードでリストのマークのカラーが暗くなってしまう
  color: var(--body-text-color);
  border: 1px solid var(--table-border-color);
  background: var(--body-background);
  border-radius: var(--card-border-radius);
  // padding: 10px 0;
  
  @include respond(lg) {
    display: none;
  }
}

// .dark .tocContent {
//   background: var(--entry);
// }

.tocContent details summary {
  font-size: calc(var(--article-font-size) * 1.0);
  cursor: zoom-in;
  margin-inline-start: calc(var(--card-padding) - 8px);
  padding: 12px 0;
  // margin-top: 10px;
  user-select: none;
  color: var(--body-text-color);
}

.tocContent details[open] summary {
  cursor: zoom-out;
  padding-bottom: 5px;
}

.tocContent .details {
  display: inline;
  // font-weight: 500;
  font-weight: bold;
}

.tocContent .inner {
  // margin: 5px 10px 0 calc(var(--card-padding) * 0.8);
  // margin: 5px 10px 0 calc(var(--card-padding) * 0.2);
  // margin: 5px 10px 0 calc(var(--card-padding) - 20px);
  margin-left: calc(var(--card-padding) - 20px);
  // padding: 0 10px;
  // opacity: 0.9;
}

.tocContent summary:focus {
  outline: 0;
}

// .tocContent li ul {
//   margin-inline-start: 0px;
// }

//-------------------------------------------------------------------------------
// #TableOfContents

.widget--toc, 
.main-article
{
  // #TableOfContents, #TableOfContents * {
  //   color: inherit;
  // }

  #TableOfContents {

      // font-size: calc(var(--article-font-size) * 0.9);
      font-size: 0.88em;
      // line-height: 0.88em;
      // color: var(--body-text-color);
      font-weight: bold;

      a:hover {
        box-shadow: 0 1px 0;
        box-decoration-break: clone;
        -webkit-box-decoration-break: clone;
      }

      ol, 
      ul {
          // margin: 0;
          // margin: 0 0 20px 10px;
          margin: 15px 0 20px 10px;
          padding: 0;
      }

      & > ul, & > ol {
          padding: 0 1em;
      }

      ol > li a,
      ul > li a {
          line-height: 1.0em;
      }

      ol li li a,
      ul li li a {
        line-height: 1.0em;
      }

      li {
          // margin: 15px 0 15px 20px;
          // margin: 15px 0 15px 5px; // 5px ずつインデント
          // margin: 15px 0 15px 4px; // 4px ずつインデント
          margin: 12px 0 12px 4px; // 4px ずつインデント
          // padding: 5px;
          padding: 0 5px 0 0;

          & > ol,
          & > ul {
              font-weight: normal;
              // margin-top: 10px;
              // margin-top: 15px; // li.margin-top + li.padding-top
              margin-top: 12px; // li.margin-top + li.padding-top
              // padding-left: 10px;
              padding-left: 0;
              // margin-bottom: -5px;
              margin-bottom: 16px;

              & > li:last-child {
                // margin-bottom: 15px;
                margin-bottom: 16px;
              }
          }
      }
  }
}

.widget--toc #TableOfContents a.active {
  font-weight: bold;
  color: #007bff;
  // text-decoration: underline;  
}

[data-scheme="dark"] .widget--toc #TableOfContents a.active {
  color: #50C0FF;
}


// -------------------------------------------------------------------------------
/* Alerts */

/* アラート全体のスタイル */
blockquote.alert {
  // padding-left: 10pt;
  padding-top: 1px;
  padding-bottom: 8px;
  // margin-top: 1.6em;
  // margin-bottom: 1.6em;
  // border-left: 3px solid;
  // background-color: var(--alert-bg-color);
  // color: var(--alert-text-color);
  // font-size: 1.0em;
  /* background-color: #f9f9f9; */
  /* border-radius: 4px; */
  /* font-size: 1rem; */
  /* line-height: 1.5; */
}

/* 各アラートタイプに応じたスタイル */
.alert-heading {
  margin-bottom: -0.4em !important; // 下部マージンを指定
  font-size: 0.95em;
  font-weight: bold;
}

.alert-note {
  border-left-color: var(--alert-color-note) !important;
}

.alert-note .alert-heading {
  color: var(--alert-color-note) !important;
}

.alert-note .fa-circle-info {
  color: var(--alert-color-note) !important;
}

.alert-tip {
  border-left-color: var(--alert-color-tip) !important;
}

.alert-tip .alert-heading {
  color: var(--alert-color-tip) !important;
}

.alert-tip .fa-lightbulb {
  color: var(--alert-color-tip) !important;
}

.alert-important {
  border-left-color: var(--alert-color-important) !important;
}

.alert-important .alert-heading {
  color: var(--alert-color-important) !important;
}

.alert-important .fa-lightbulb {
  color: var(--alert-color-important) !important;
}

.alert-important .fa-circle-exclamation {
  color: var(--alert-color-important) !important;
}

.alert-warning {
  border-left-color: var(--alert-color-warning) !important;
}

.alert-warning .fa-triangle-exclamation {
  color: var(--alert-color-warning) !important;
}

.alert-warning {
  border-left-color: var(--alert-color-warning) !important;
}

.alert-warning .alert-heading {
  color: var(--alert-color-warning) !important;
}

.alert-caution {
  border-left-color: var(--alert-color-warning) !important;
}

// -------------------------------------------------------------------------------
/* stars */

/* .rating-stars { */
  /* テキストの中央揃え（保険） */
  /* text-align: center;  */
  /* 垂直方向の中央揃え */
  /* vertical-align: middle;  */
  /* display: flex; */
  /* 左右中央揃え */
  /* justify-content: center; */
  /* 垂直方向の中央揃え */
  /* align-items: center; */
  /* 子要素が親要素のサイズを超えないようにする */
  /* overflow: hidden; */
  /* display: block; */
  /* 左右中央揃え */
  /* text-align: center;  */
  /* 左右中央揃え */
  /* margin: 0 auto;  */
  /* width: 200px; */
  /* width: 100%; */
  /* height: 50px; */
  /* width: calc(var(--base-font-size) * 4.0 * 5); */
/* } */

.rating-stars .filled-stars{
  fill: #FF0088;
}

.rating-stars .empty-stars{
  fill: #AAA;
}

/* 全体のコンテナのスタイリング */
.q-difficulty-rating-container {
  /* display: inline-block; */
  display: flex;
  align-items: center; /* 上下中央揃え */
  justify-content: flex-start; /* 必要なら左寄せ、中央揃えの場合は center */
  width: 110px;
  /* position: relative; */
}

/* 星アイコン全体のデフォルトスタイリング */
.q-difficulty-rating {
  display: block;
  vertical-align: middle; /* 古いブラウザ対応用 */
  width: 100%;
  height: auto;
  fill: none;
  stroke: none;
}

/* 演習問題の難易度レーティング (星) */
/* 塗りつぶされた星のデザイン */
.q-difficulty-rating .filled-stars {
  fill: #FFC107; /* 黄色 */
  transition: fill 0.3s ease-in-out;
}
/* 空の星のデザイン */
.q-difficulty-rating .empty-stars {
  fill: #C0C0C0; /* 灰色 */
  transition: fill 0.3s ease-in-out;
}
.dark .q-difficulty-rating .filled-stars {
  /* fill: #ffd700; */
  fill: var(--q-difficulty-rating-filled-stars);
}
.dark .q-difficulty-rating .empty-stars {
  /* fill: #AAA; */
  fill: var(--q-difficulty-rating-empty-stars);
}

/* ホバー時のスタイリング（例: 星が少し明るくなる） */
.q-difficulty-rating-container:hover .filled-stars {
  fill: #FFD54F; /* 明るい黄色 */
}
.q-difficulty-rating-container:hover .empty-stars {
  fill: #D6D6D6; /* 明るい灰色 */
}

/* アクセシビリティ向上のためのフォーカス時のスタイリング */
.q-difficulty-rating-container:focus-within .filled-stars,
.q-difficulty-rating-container:focus-within .empty-stars {
  outline: 2px solid #FFC107;
  outline-offset: 4px;
}

// -------------------------------------------------------------------------------
/* 問題文(1題)のスタイル */

.question-difficulty {
  display: flex;
  align-items: center; /* 上下中央揃え */
  gap: 8px; /* ラベルと星の間隔 */
}

.difficulty-label {
  font-weight: bold;
  margin-right: 4px;
}

.question-text {
  margin-top: 12px; /* 問題文との間隔 */
}

.question-difficulty .difficulty-stars .q-difficulty-rating {
  display: block;
  vertical-align: middle; /* 古いブラウザ対応用 */
}

.question-difficulty .difficulty-stars .q-difficulty-rating-container {
  display: flex;
  align-items: center; /* 上下中央揃え */
  justify-content: flex-start; /* 必要なら左寄せ、中央揃えの場合は center */
  width: 100px;
}

/* ------------------------------------------------------------------------------- */
/* 演習問題一覧 */

/* 問題全体のレイアウト */
.q-item {
  /* margin: 30px 0; */
  margin-bottom: 12px;
  padding-bottom: 0;
  border-radius: 5px;
  transition: background-color 0.3s ease;
  /* border: 1px solid #ddd; */
}

/* ヘッダー部分 (No. と 星を横並び) */
.q-item .q-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 5px;
}

.q-item .q-header .q-difficulty .q-difficulty-rating-container {
  display: flex;
  align-items: center; /* 上下中央揃え */
  width: 90px;
}

/* No. のスタイル */
.q-item .q-header .q-id a {
  /* すべてのスタイルをリセット */
  /* all: unset;  */
  /* inline要素に戻す */
  /* display: inline;  */
  /* font-weight: bold; */
  /* text-decoration: none; */
  /* text-decoration: underline; */
  /* text-decoration: none;  */
  /* アンダーライン */
  border-bottom: 1px solid #007BFF;
  /* アンダーラインと文字の間隔を調整 */
  padding-bottom: 0px;
  font-size: calc(var(--article-font-size) * 1.0);
  color: #007BFF;
  /* 親要素の値を引き継ぐ */
  /* color: inherit;  */
}
[data-scheme="dark"] {
  .q-item .q-header .q-id a {
    border-bottom-color: #40C0FF;
    // color: #80C0FF;
    // color: #00ADFF;
    // color: #40C0FF;
    color: #50D0FF;
    transition: color 0.3s ease;
  }
}

.q-item .q-header .q-id a:hover {
  border-bottom-color: #FF4080;
  color: #FF4080;
}

/* 問題文のスタイル */
.q-item .q-content {
  padding-top: 10px;
  padding-bottom: 15px;
  padding-left: 5px;
  padding-right: 5px;
  /* font-size: 0.9em; */
  font-size: calc(var(--article-font-size) * 0.96);
  line-height: 1.7;
  color: rgb(30, 30, 50);
  /* background-color: var(--theme); */
  /* background-color: #FCFCFF; */
  background-color: #FCFCFF;
}
[data-scheme="dark"] {
  .q-item .q-content {
    // color: rgb(218, 218, 219);
    // color: rgb(250, 250, 250);
    color: rgb(235, 235, 235);
    background-color: #282834;
  }
}

.q-item {
  .q-header {
    padding: 0 5px;
    background-color: rgb(240, 248, 255);
  }
}
[data-scheme="dark"] {
  .q-item {
    .q-header {
      // background-color: rgb(55, 56, 62);
      background-color: rgb(55, 54, 50);
    }
  }
}

/* ホバー時の背景変更 */
.q-item:hover {
  background-color: #F5F6FF;
  transition: background-color 0.3s ease;
}
.q-item:hover .q-header {
  background-color: #E0E9FF;
  transition: background-color 0.3s ease;
}
.q-item:hover .q-content {
  background-color: #F5F6FF;
  transition: background-color 0.3s ease;
}

[data-scheme="dark"] {
  .q-item:hover {
    background-color: #050520;
  }
  .q-item:hover .q-header {
    background-color: #232950
  }
  .q-item:hover .q-content {
    background-color: #050520;
  }
}

/* タイトル (全編など) */
.edition-title {
  font-weight: bold;
  margin-top: 0px;
  margin-bottom: 10px;
  font-size: calc(var(--article-font-size) * 1.1);
}

/* <div class="row edition"> のブロックを非表示にする */
/* .list-toggle .edition {
  display: none !important;
} */

// 幅が狭い画面では、ラジオボタンの形が縦長になってしまう

/* ラジオボタンのレイアウト */
.list-toggle {
  display: flex;
  flex-direction: column; /* 縦並びにする */
  align-items: flex-start; /* 左寄せ */
  margin-bottom: 20px;
  gap: 18px; /* ラベル間の間隔 */
  padding: 16px;
  border: 1px solid #ccc; /* 全体を囲む枠線 */
  border-radius: 8px; /* 角を丸める */
  // background-color: #fafafc;
  background-color: #fcfcfc;
  max-width: 100%;
}
[data-scheme="dark"] {
  .list-toggle {
    // background-color: #1f1f25;
    // background-color: #242424;
    // background-color: rgb(55, 56, 62);
    // background-color: rgb(55, 56, 57);
    // background-color: rgb(50, 50, 50);
    background-color: rgb(55, 54, 50);
  }
}

/* ラジオボタンの行のデフォルト設定 */
.list-toggle .row-title,
.list-toggle .row-sort {
  display: flex;
  flex-wrap: wrap; /* 画面が狭いとき折り返す */
  gap: 12px;
}
[data-scheme="dark"] {
  .list-toggle .row-title,
  .list-toggle .row-sort {
    color: rgb(250, 250, 250);
  }
}

/* ラジオボタンの行を横並びに設定 */
.list-toggle .row-title {
  // display: flex;
  flex-direction: column; /* ラジオボタンを縦並び */
  // justify-content: flex-start;
  // gap: 12px; /* ラジオボタン間の間隔 */
  padding-bottom: 18px; /* 罫線と間隔を確保 */
  border-bottom: 1px solid #ccc; /* 灰色の区切り線 */
}

.list-toggle .row-sort {
  // display: flex;
  // flex-direction: row; /* ラジオボタンを横並び */
  // justify-content: flex-start;
  // gap: 12px; /* ラジオボタン間の間隔 */
  padding-top: 0px; /* 罫線との間隔 */
}

/* 画面幅が狭いときは縦並びに変更 */
@media (max-width: 600px) {
  // .list-toggle .row-title,
  .list-toggle .row-sort {
    flex-direction: column;
    align-items: flex-start;
  }
}

/* チェックされたラジオボタンのラベルの色を変更 */
.list-toggle input[type="radio"]:checked + span {
  /* background-color: #007bff; */
  /* color: white; */
  /* color: #2196f3; */
  color: #1976d2; 
}
[data-scheme="dark"] {
  .list-toggle input[type="radio"]:checked + span {
    // color: #00E0FF;
    color: #50D0FF;
  }
}

/* ラジオボタンとラベルを一緒に配置 */
.list-toggle label {
  display: flex;
  align-items: center;
  gap: 5px; /* ラジオボタンとテキストの間隔 */
  /* padding: 5px 10px; */
  cursor: pointer;
  font-size: calc(var(--base-font-size) * 0.9);
  line-height: 1;
}

/* カスタムラジオボタン */
.list-toggle input[type="radio"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  aspect-ratio: 1 / 1;
  width: 16px;
  height: 16px;
  // box-sizing: content-box; /* width, height に padding や border を含めない */
  border: 2px solid #ccc;
  border-radius: 50%;
  background-color: white;
  cursor: pointer;
  /* display: inline-block; */
  /* vertical-align: middle; */
  margin: 0; /* ラジオボタンのデフォルト余白を削除 */
  padding: 0; /* 余白をなくす */
  /* ズレを補正 */
  position: relative;
  vertical-align: middle; /* テキストとのズレを防ぐ */
  outline: none; /* フォーカス枠を消す */
  /* これで微調整 */
  top: 0px; 
}
[data-scheme="dark"] {
  .list-toggle input[type="radio"] {
    border-color: #BBBBBB;
  }
}

/* チェックマーク */
.list-toggle input[type="radio"]::before {
  content: "";
  display: none;
  position: absolute;
  top: 50%; /* 親要素の中央に配置 */
  left: 50%; /* 親要素の中央に配置 */
  transform: translate(-50%, -50%);
  width: 8px;
  height: 8px;
  background-color: #2196f3;
  border-radius: 50%;
}

/* 選択時にチェックマークを表示 */
.list-toggle input[type="radio"]:checked::before {
  display: block;
}

/* ラジオボタンにホバーしたときのエフェクト */
.list-toggle input[type="radio"]:hover {
  border-color: #42a5f5; /* ホバー時のボーダー色（青） */
  background-color: #e3f2fd; /* ホバー時の背景色（淡い青） */
}

/* 選択中のラジオボタン */
.list-toggle input[type="radio"]:checked {
  /* 選択時の背景色 */
  /* background-color: #2196f3; */
  background-color: white;
  /* 選択時のボーダー色 */
  border-color: #1976d2; 
}
[data-scheme="dark"] {
  .list-toggle input[type="radio"]:checked {
    border-color: #42a5f5;
  }
}

/* ラジオボタンがフォーカスされたとき */
.list-toggle input[type="radio"]:focus {
  /* デフォルトのアウトラインを消す */
  outline: none;
  /* フォーカス時の強調 */
  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.5); 
}

/* ------------------------------------------------------------------------------- */
